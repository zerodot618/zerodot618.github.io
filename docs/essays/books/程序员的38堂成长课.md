# 程序员的 38 堂成长课

本书梳理总结了一些要诀，特记录在此。

## 写在前面

### CP1 心系代码

要诀 1：要想写出好代码。必须对好代码有执念。想要成为优秀的程序员，必须为之投入精力和时间。

要诀 2：对代码产生情感是再正常不过的事情。为杰出的作品自豪，对丑陋的代码厌恶，是很正常的。

## 编码乃余事

### CP2 保持外观整洁

要诀 1：不要为了编码规范争吵，对于编码规范要有正确的态度。

要诀 2：好的编码规范服务于代码的意图，绝不是什么艺术探索。

要诀 3：好的编码规范是为了减少错误，而不是创作 ASCII 码的艺术作品。

要诀 4：牢记代码是为他人而写的。

要诀 5：不要把调整排版和修改功能同时放在一次提交中，而是把他们分别提交到版本控制系统。

### CP3 写更少的代码

要诀 1：更少的代码有时候意味着更多的软件。

要诀 2：代码要简介明了，避免冗长的表达式。

要诀 3：不要复制代码。把重复的代码提取到一个公有函数中，通过参数来控制变化的部分。

要诀 4：如果发现了代码重复，就要想办法消除它。

要诀 5：确保每一句注释都有其价值。代码本身通常都能说明 **What** 和 **How** 的问题。注释通常是为了解释 **Why**——不解释其然，解释其所以然。

要诀 6：不要把代码注释掉。这会让其他人感到困惑并妨碍他们修改代码。

要诀 7：让代码每天都比前一天更好。消除你遇到的所有不必要的重复。

### CP4 删除也是一种优化

要诀 1：你既可以通过添加代码改善系统，也可以通过删除代码改善系统。

要诀 2：尽可能清楚僵尸代码。僵尸代码会妨碍你，拖慢你的步伐。

要诀 3：删除以后可能要用的代码是安全的。你随时可以把它们从版本控制系统里找回来。

要诀 4：代码大扫除一定要单独提交。

### CP5 代码之背影

要诀 1：重温自己以前写的代码可以看出你的编程技巧是进步了还是退步了。

### CP6 导航路线

要诀 1：学习代码的最佳路径是由已经熟悉代码的人引领着学习。要积极寻求帮助。

要诀 2：健康的代码只需要一次签出操作来获得所有项目代码，代码可以被放在构建机器的**任何**路径下。不要有多个签出步骤或依赖某个固定路径上的代码。

要诀 3：正常构建只需要一个步骤，而且构建过程不需要人工干预。

要诀 4：通常，系统的**实际**架构与**理想**的设计不同。你应该始终相信代码，而不是文档。

要诀 5：学习代码的最佳方法是修改它，然后从错误中学习。

### CP7 走出泥潭

要诀 1：混乱的代码无所不在，要未雨绸缪。准备一些应对它们的法宝，并且能运用自如。

要诀 2：遇到“糟糕”的代码，要克制自己的厌恶情绪，想办法进行一些切换实际的改善。

要诀 3：慎选战场。权衡是否应该投入时间和精力来“清理”糟糕的代码。置之不理可能更务实。

要诀 4：遵循童子军军规。只要修改代码，就让它变得比修改之前**更好**。

> 童子军军规：纵使保证营地比你来的时候更干净。（罗伯特 • C. 马丁）

要诀 5：缓慢地、谨慎地修改代码。每次改变一点点。

要诀 6：对于烂代码，不必追求责任。

### CP8 不可忽视错误

要诀 1：不要忽略代码中的任何错误。不要推迟到以后出错再处理，“以后”处理通常表示不会处理。

要诀 2：合理使用异常。掌握编程语言中异常的用法和规则。

### CP9 意料之中的意外

要诀 1：在**编写代码时**考虑所有可能的执行路径。不要拖延对“异常”情况的处理，因为拖延往往会变成忽略，代码将因此产生 bug。

### CP10 bug 追踪

要诀 1：通过合理使用工程实践，编码 bug 进入代码。不要期望快速生成的代码是高质量的。

要诀 2：断言和日志（即使是不起但的 printf）都是有效消除 bug 的工具。要高效使用。

要诀 3：二分法通过缩小问题范围来更快地得到结果。

> Git 的 bisect 工具可以自动完成二分法标记，如果你是 Git 用户，记得收藏一下。

要诀 4：未经测试的代码是 bug 的滋生地，而测试是“杀虫剂”。

要诀 5：熟练掌握调试器，并在合适的时机使用。

要诀 6：尽快修复 bug。不要让它们堆积起来，将你的代码变成垃圾坑。

### CP11 测试时间

要诀 1：改进软件开发，需要快速反馈，问题一出现就立即研究并解决它们。好的测试策略能够缩短反馈循环。

要诀 2：我们需要在各个软件层级之间和开发过程中的各个阶段之间进行测试。然而，程序员需要尽快地进行小范围测试，这样才能缩短反馈循环，快捷地开发高质量软件。

要诀 3：在编写代码的**同时**编写测试。不要推迟，否则测试的效率将非常低。

要诀 4：应该尽早且经常运行测试，并将其加入构建过程中。

要诀 5：再好的开发测试也无法取代周密的 QA 测试。

要诀 6：糟糕的测试会变成一种负担，降低开发效率。

要诀 7：维护好测试，并在它对你“说话”时听取它的意见。

要诀 8：全局变量和单例对象不利于建立可靠的测试。测试具有隐藏依赖的代码单元难度较大。

要诀 9：构建**易于测试**的代码有利于产生好的设计。

### CP12 应对复杂性

复杂性来自圆团（软件组件）、线条（这些组件之间的连接），但主要来自构建软件的人。是人创造了复杂性。

### CP13 双城故事

要诀 1：糟糕的公司结构和不良的开发流程将导致糟糕的软件体系结构。

要诀 2：坚守住软件设计的质量。糟糕的设计会导致更糟糕的设计。

要诀 3：开发团队中的工作关系将直接影响软件设计。不健康的工作关系和自我膨胀会产出不健康的软件。

要诀 4：好的设计会考虑连接机制以及组件间连接的数量和性质。一个系统模块应该具有独立存在的价值和能力。紧密耦合会导致代码不可测试。

要诀 5：松散和模糊的体系结构会导致单个组件的代码编写质量低下，进而不能很好地组合，还会导致代码重复和人类的浪费。

要诀 6：糟糕的架构造成的恶果不限于代码。它们向外扩散，影响人员、团队、流程和时间表。

要诀 7：清晰的系统架构设计造就一致的系统。所有的决定都不应该离开系统架构的上下文。

要诀 8：清晰的架构有助于减少功能的重复。

要诀 9：软件架构不是一成不变的，如果需要，就可以改变。而要想改变，架构必须保持简单。要抵制违背简单性原则的改变。

要诀 10：将设计决策推迟到不得不做的时候。当需要还不清晰时，不要做设计决策。不要猜测。

要诀 11：一定要保持设计的质量水准。应该将这个责任赋予开发人员，并确保它们能够忠于职守。

要诀 12：为你的系统创建一组良好的自动化测试。它使你能够以最小的风险进行基本的架构调整，同时能给你带来架构调整的运作空间。

要诀 13：单元测试会带来更好的设计，所有应针对可测试性进行一些设计。

要诀 14：良好的项目计划能带来优秀的设计。分配足够的时间才能创造架构上的典范——这可不是即刻就能完成的事。

要诀 15：团队的组织形式对其生成的代码有不可避免的影响。随着时间的推移，架构反过来会影响团队协作。当团队互相隔离时，代码交互就会不畅；当团队一起工作时，架构集成则行云流水。

## 刻意练习，成就卓越

### CP14 软件开发是......

（是艺术、是科学、是运动、是游戏、是鸡毛蒜皮的琐事......）

要诀 1：程序员需要品味和美感来编写卓越的代码。

要诀 2：好的软件开发不是**牛仔式**的自由编码，而是暂时放下你能想到的第一个方法，开始一段深思熟虑的精准过程。

要诀 3：优秀的程序员工作是谦逊的。它们承认自己在某些方面的无知。

### CP15 遵守规则

要诀 1：开发团队有一组规则。这些规则定义了我们该**做什么**以及**怎么做**，同时也描述了团队的**编码文化**。

> 书中作者的 3 条规则：1、保持简单；2、开动脑筋；3、没有什么是一成不变的。值得借鉴。

要诀 2：不要依赖模糊、不成文的团队规则。使规则清晰明确，以此为基础打造团队文化。

### CP16 保持简单

> 简单性是源于无数开发准则的一面旗帜，比如，从充分性的角度看：YAGNI；从代码规模的角度看：DRY（don't repeat yourself）。从设计的角度看，简单性体现在高内聚和低耦合。

要诀 1：简单的代码需要设计。它与过于简化的代码不是一回事。

要诀 2：简单的设计旨在防止误用。为了呈现更简单的 API，我们宁愿引入一些额外的内在复杂性。

要诀 3：简单的设计要尽可能地小，小到不能再小。

要诀 4：一致性能使代码清晰。

要诀 5：针对根本原因修复 bug，而不是头痛医头，脚痛医脚。“贴膏药”不能产生简单的代码。

要诀 6：代码应避免隐含某些假设。

要诀 7：只编写必须的代码。任何额外的代码都会提高复杂性，成为一种负担。

### CP17 开动脑筋

要诀 1：停下来思考一下。不要写愚蠢的代码。

要诀 2： 承认错误和失误的编码决策。从错误中学习。

要诀 3：集中精神。在编写代码时不要漫不经心。

要诀 4：用于开动脑筋思考。你有权力也有能力对代码进行评判，并就如何改进做出决策。

### CP18 没有一成不变

要诀 1：不要试图让代码不可改变。如果产品中有不可更改的代码，那么产品就会腐化。

要诀 2：你是软件的主人，一切尽在你的掌握之中。不要让代码或流程来决定项目如何发展。

要诀 3：修改代码需要勇气和技巧。不要鲁莽。

要诀 4：产生“好的代码”不是别人的问题。这是你的责任。你有能力做出改变，带来进步。

要诀 5：进行一系列频繁的、小的、可验证的调整，而不是一次大规模的代码调整。

要诀 6：自动化测试时一个极为有益的安全工具，可以帮助你建立对代码修改的信心。

### CP19 代码复用案例

要诀 1：避免复制-粘贴代码。可以将公用的逻辑放到公有函数和公共库中，而不是忍受重复的代码和重复的 bug。

要诀 2：再没有仔细检查之前，不要将在互联网上找到的代码复制到项目中。

要诀 3：代码之所以是“共享”的，是因为它是多个使用者共同使用的，而不是因为开发人员想创建一个漂亮的共享库。

要诀 4：不要忽视别人的代码。与其编写自己的版本，不如使用现有的第三方库。

### CP20 高效版本控制

要诀 1：使用版本控制系统。它就不是可选的，也不是最好拥有的工具，而是开发工作的支柱。没有它，你的工作成果就时刻处于危险当中。

要诀 2：在版本控制系统中存储软件项目包含的**每个**文件。但是要存储**尽量少**的文件，不要包含任何不必要的文件。

要诀 3：提交要**小而频繁**。

要诀 4：源代码栖息在存储它的版本控制系统中。一个项目越成熟，它对这个栖息地的依赖就越大。

### CP21 让球越过门柱

要诀 1：把软件开发看作一个线性过程是错误的。

要诀 2：注意不要在开发和测试工作之间人为地制造障碍。

要诀 3：不健康的团队交互会导致不健康的代码。

要诀 4：没有周到且仔细地为 QA 构建软件表明对测试人员缺乏尊重。

要诀 5：不要急于创建版本。你会犯错。

要诀 6：测试人员只会解释软件开发人员引入系统的问题（由于疏忽或犯了错误）。如果他们发现了错误，那就是**你的错误**。

要诀 7：不要把故障报告看成针对你个人的。它们不是对个人的侮辱。

要诀 8：培养一种尊重 QA 团队的健康态度。享受与他们一起创造优秀软件的过程。

要诀 9：QA 团队既不是质量的唯一负责人，也不是质量的看门人。质量是每个人的责任。

### CP21 冻结代码奇事

要诀 1：“代码冻结”是指在发布之前的一段时间，我们期望代码没有任何更改。

要诀 2：“代码冻结”是一个误导性的术语。不管你多么期待，代码也不会静止不动。

要诀 3：放慢开发速度，小心地引导代码发布，小心地管理最终的修复和更改。

要诀 4：一定要裁员分支。

要诀 5：有时候你要发布一款不太满意的软件，这并不奇怪（也不是一个错误）。

要诀 6：在代码冻结期间，你将积累技术债。注意监控这些债务，并准备好在发布后尽快还清。

要诀 7：唯一真正的“代码冻结”是在一个版本的发布被接受之后。这是代码最终确定不变的时刻。

要诀 8：追求永远不会“冻结”的代码，使代码随时可以发布到生产环境中。

### CP23 软件发布

要诀 1：创建软件版本需要纪律和计划，不仅仅是在开发人员的 IDE 中按一下“构建”按钮。

要诀 2：总是通过新的签出操作来从头开始构建软件。永远不要重用任何旧的构建。

要诀 3：使构建简单到只需一个步骤，自动化处理所有工作。可以使用脚本语言来做这件事。

要诀 4：在 CI 服务器上部署构建，以确保它们正常运行。用同样的方式发布正式版本。

要诀 5：不要在没有测试最终产品之前发布软件。

要诀 6：不要将软件发布的规划和构建推迟到最后一刻。尽早构建，通过快速而频繁地构建进行迭代。想调试软件一样调试构建过程。

## 束身修行

### CP24 做一个乐知者

要诀 1：处于不断学习的状态。对学习新的东西充满期待。

要诀 2：学会**享受**学习。

要诀 3：我们的学习往往过于狭隘。找到一个更广阔的范围，从更多领域获取灵感。

要诀 4：使用尽可能多的信息源来提高学习质量。

要诀 5：学习时记笔记。即使你会把笔记扔掉，也要这样做。

要诀 6：目标明确地管理你的知识资产。

要诀 7：对于某个话题，通过教来学效果很好。

要诀 8：通过实际使用来巩固所学知识。运行示例代码，回答问题，创建示例项目。

### CP25 考试驱动型程序员

要诀 1：当你达到胜任的状态时，一定不要自满。在编写代码的时候哦一定要让大脑充分参与，以避免愚蠢、潜藏危险的错误。

### CP26 享受挑战

总是追逐光鲜亮丽的新事物而不编写实用、有用的代码是不切实际和危险的。但就个人而言，陷入编码的窠臼也很危险。只处理毫无意义、乏味的软件，既没有挑战也没有乐趣。

### CP27 避免停滞

要诀 1：要警惕停滞不前。从定义上讲，追求成为一个更好的程序员并不是一种舒适的生活方式。

要诀 2：投入时间和精力来提高技艺。这是一项值得的投资，会有回报的。

**帮助你走出舒适区的一些练习**

- 停止使用相同的工具。也许会有更好的方法让你的生活更轻松，你需要去了解它们。
- 停止对每个问题使用相同的编程语言。不要用高射炮打蚊子。
- 开始使用不同的操作系统。学习如何正确使用它们。即使不喜欢，也华一段时间去尝试，真正了解其优点和缺点。
- 开始使用一个不同的文本编辑器。
- 学习键盘快捷键，看看它如何影响你的工作流程。有意识的停止使用鼠标。
- 学习你在当前的工作中不需要的一个新话题，比如加深对数据和排序算法的了解。
- 开始你的业余项目。是的，利用你宝贵的业余时间做个“极客”，并且开放源代码。
- 投入项目的一个新的、你知之甚少的领域。这样做可能不会马上见效，但你将获得更广泛的知识，并有所收获。

考虑将自己的技能扩展到编程领域之外。

- 学习一门新语言，但不是编程语言。比如在上班的路上听一些关于的日语的有声书。
- 重新整理办公桌！试着换一个角度来看待你的工作方式。
- 开始一项新的活动。也许可以开一个博客来记录你的学习。把更多的时间花在爱好上。
- 开始健身：进健身房或开始跑步。
- 多参加社交活动。花时间与“极客”和非“极客”相处。
- 调整饮食，或者早点儿睡觉。

### CP28 程序员的道德规范

要诀 1：不要通过编写不可读或过于“聪明”的代码，来让自己变得“不可或缺”。

要诀 2：尊重软件许可证。

要诀 3：确保说明代码中复用的部分的出处。

要诀 4：对代码的良好态度**也是**对其他程序员的良好态度。

要诀 5：不要编写会使他人生活变得更糟的软件。这是滥用权力。

要诀 6：己所不欲，勿施于人。

要诀 7：有道德的程序员在任何时候都对产品的质量负责。

要诀 8：一个疲惫的程序员是没有价值的。不要过度劳累。要清楚地知道你的极限。

> 作者提出的更简洁的程序员道德使命宣言：我发誓不会对代码或业务造成任何损害。追求个人进步，提高技能。我将尽我所能完成分配给我的任务，与团队和谐相处。我将以正直的态度与他人互动，努力使项目和团队的效率及价值最大化。

### CP29 热爱编程语言

要诀 1：不要变成技能单一、只会一招的人。作为开发人员，你需要去发现新的挑战，不断学习和成长。

要诀 2：优秀的程序员了解多种语言和多种惯用法，从而拓宽了解决方案的选择范围。这改进了他们编写的代码。

要诀 3：每天使用熟悉的编程语言进行工作是你必须处理好的一种关系。

要诀 4：爱你的语言！用你喜欢的语言工作。

要诀 5：为了用一种语言编写出最好的代码，你应该遵循它的风格和惯用法，而不是强推自己的那一套。

要诀 6：好的程序员也是好的沟通者。他们听、说、读、写、编都很好。

要诀 7：不要期望一夜之间就成为语言大师，但也不要在学习的过程中感到沮丧。

### CP30 程序员的姿态

要诀 1：照顾好自己。工作时保持良好坐姿。

## 计日程功

### CP31 用智不用力

要诀 1：使用已有的代码，而不是自己从头开始编写。把时间用在更重要的事情上。

要诀 2：先把精力集中在最重要的事情上。什么是最紧急的，或会产生最大价值的？

要诀 3：记住 **KISS** 原则：Keep It Simple, Stupid。

要诀 4：如果经常要做一件事，就想办法让计算机帮你做。用脚本实现自动化。

### CP32 完成之际即完成

要诀 1：把大任务分解成一系列小的、容易理解的任务。这样你将能更准确地判断进展。

要诀 2：确保你定义了“完成”。

要诀 3：如果不知道什么是“完成”，就不应该开始。

要诀 4：编写测试代码来定义代码的完成和正常工作。

要诀 5：不要做不必要的工作。做到“完成”，然后停下来。

### CP33 这次我明白了......

要诀 1：对其他程序员负责。定期与他们一起回顾进展。

要诀 2：当面对问题时，必须思考如何用多种方法来解决它。之后再着手去做。

## 觅良师益友

### CP34 他人之力

要诀 1：要可以地让自己融入一群杰出的程序员当中。

### CP35 至关重要的一个认知

要诀 1：对团队的责任感能够极大提高你的代码质量。

要诀 2：如果知道会有人读你的代码并给出建议，你就会编写出更好的代码。

程序员之间的责任感是需要一些勇气的，你需要用开放的心态接受批评和建议。在给予别人反馈和建议时要讲究策略。但是从总体上来看，好处是立竿见影的，对于代码质量的提升也是以汤沃雪。

### CP36 说出来！

要诀 1：代码的作用是与计算机进行沟通。为保证指令按照你的意图执行，它们必须清楚而明确。

要诀 2：代码的作用是与其他人进行沟通，也包括你自己。代码必须是清晰明了的，这样其他人才能维护。

要诀 3：更多的注释并不一定使你的代码更好。表达清晰的代码不需要额外的注释来支撑。

要诀 4：代码的沟通效果取决于编程语言、采用的惯用法和底层的自然语言。所有这些都必须被读者所理解。

要诀 5：掌握不同的沟通形式。为每个对话选择适当的机制。

要诀 6：和正确的人使用正确的词语沟通。

要诀 7：有效的沟通需要专注。

要诀 8：良好的沟通有利于产生卓越的代码。团队的沟通方式将塑造代码。

要诀 9：与人沟通要坦荡，态度要真诚，以促进团队有效合作。

### CP37 各种宣言

要诀 1：了解开发方法论、趋势和宣言。

要诀 2：签署那些明智的开发宣言。但不要盲目地跟随，也不要教条式地遵循。

### CP38 代码赋

要诀 1：通常，软件开发过程中最棘手的问题不是技术问题，而是人的问题。

要诀 2：当你周围都是对代码漠不关心的程序员时，你自己要保持一种健康的态度。小心不要被不良习惯所影响。

### 后记

要诀 1：作为一个程序员，你的态度决定了你的高度。调整心态，成为更好的程序员。

